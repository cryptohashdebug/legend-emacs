#+STARTUP: overview
#+TITLE: Legend
#+LANGUAGE: es
#+OPTIONS: num:nil
*El legendario Emacs

** Initialize =dashboard=
*** Description
Esta seccion configura el dashboard con una imagena y algunos botones
*** Code
#+BEGIN_SRC emacs-lisp
  (use-package dashboard
    :ensure t
    :defer nil
    :preface
    (defun update-config ()
      "Actualizando Legend a la ultima version, desde el Dashboard"
      (interactive)
      (let ((dir (expand-file-name user-emacs-directory)))
	(if (file-exists-p dir)
	    (progn
	      (message "Legend esta actualizando!")
	      (cd dir)
	      (shell-command "git pull")
	      (message "Actualizacion terminada. Switch to the messages buffer to see changes and then restart Emacs"))
	  (message "\"%s\" doesn't exist." dir))))

    (defun create-scratch-buffer ()
      "Create a scratch buffer, se usa en el Dashboard"
      (interactive)
      (switch-to-buffer (get-buffer-create "*scratch*"))
      (lisp-interaction-mode))
    :config

    (dashboard-setup-startup-hook)
    (setq dashboard-items '((recents . 5)))
    (setq dashboard-startupify-list '(dashboard-insert-banner                                  
                                  dashboard-insert-banner-title
                                  dashboard-insert-navigator
                                  dashboard-insert-init-info
                                  dashboard-insert-items
                                  dashboard-insert-footer))
    (setq dashboard-banner-logo-title "L e g e n d - The cutest Emacs distribution!")
    (setq dashboard-image-banner-max-width 200)
    (setq dashboard-startup-banner "~/.emacs.d/banner.png")

    (setq dashboard-center-content t)
    ;;(setq dashboard-vertically-center-content t)
    (setq dashboard-show-shortcuts nil)
    (setq dashboard-set-init-info t)
    (setq dashboard-init-info (format "%d packages loaded in %s"
				      (length package-activated-list) (emacs-init-time)))
    (setq dashboard-set-footer nil)
    (setq dashboard-set-navigator t)
    (setq dashboard-navigator-buttons
	  `(;; line1
	    ((,nil
	      "Legend on github"
	      "Open Legend' github page on your browser"
	      (lambda (&rest _) (browse-url "https://github.com/snackon/Legend"))
	      'default)
	     (nil
	      "Legend crash course"
	      "Open Legend' introduction to Emacs"
	      (lambda (&rest _) (find-file "~/.emacs.d/Witcheat.org"))
	      'default)
	     (nil
	      "Update Legend"
	      "Obtén la última actualización de Legend. ¡Consulta los cambios en GitHub!"
	      (lambda (&rest _) (update-config))
	      'default)
	     )
	    ;; line 2
	    ((,nil
	      "Open scratch buffer"
	      "Switch to the scratch buffer"
	      (lambda (&rest _) (create-scratch-buffer))
	      'default)
	     (nil
	      "Open config.org"
	      "Open Legend' configuration file for easy editing"
	      (lambda (&rest _) (find-file "~/.emacs.d/config.org"))
	      'default)))))
#+END_SRC
*** Notes
Si prestas atención al código del panel, notarás que usa funciones personalizadas definidas en el bloque :preface use-package. Escribí todas esas funciones consultando distribuciones de Emacs de otros usuarios (principalmente [[https://github.com/snackon/Witchmacs][Witchmacs]]) y luego experimentándolas y adaptándolas a Legend. Si investigas, encontrarás lo mismo que yo, ¡quizás incluso más!


